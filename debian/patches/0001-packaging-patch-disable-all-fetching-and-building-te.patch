From: John Zupin <johnz@lunarg.com>
Date: Mon, 17 Jan 2022 13:57:44 -0700
Subject: packaging patch: disable all fetching and building test directories

---
 CMakeLists.txt         | 69 +++++++++++++++++++++++++-------------------------
 layer/CMakeLists.txt   |  2 +-
 library/CMakeLists.txt |  2 +-
 3 files changed, 37 insertions(+), 36 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index e7e9608..80b3423 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -29,45 +29,46 @@ set(CMAKE_CXX_STANDARD 11)
 # FetchContent_MakeAvailable) it will also set <givenName>_*
 # variables, but this isn't consistent and isn't guaranteed
 # by the documentation.
-FetchContent_Declare(
-	googletest
-	GIT_REPOSITORY https://github.com/google/googletest
-	GIT_TAG release-1.11.0
-)
-set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
-
-FetchContent_Declare(
-	jsoncpp
-	GIT_REPOSITORY https://github.com/open-source-parsers/jsoncpp
-	GIT_TAG 1.9.4
-)
+# FetchContent_Declare(
+# 	googletest
+# 	GIT_REPOSITORY https://github.com/google/googletest
+# 	GIT_TAG release-1.11.0
+# )
+# set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
+
+# FetchContent_Declare(
+# 	jsoncpp
+# 	GIT_REPOSITORY https://github.com/open-source-parsers/jsoncpp
+# 	GIT_TAG 1.9.4
+# )
+
 set(JSONCPP_WITH_TESTS OFF CACHE BOOL "" FORCE)
 set(JSONCPP_WITH_POST_BUILD_UNITTEST OFF CACHE BOOL "" FORCE)
 set(JSONCPP_WITH_WARNING_AS_ERROR OFF CACHE BOOL "" FORCE)
 set(JSONCPP_WITH_PKGCONFIG_SUPPORT OFF CACHE BOOL "" FORCE)
 set(BUILD_SHARED_LIBS OFF CACHE BOOL "" FORCE)
 set(BUILD_OBJECT_LIBS OFF CACHE BOOL "" FORCE)
-FetchContent_Declare(
-	vulkan-headers
-	GIT_REPOSITORY https://github.com/KhronosGroup/Vulkan-Headers
-	GIT_TAG ${VULKAN_TAG}
-)
-FetchContent_Declare(
-	vulkan-validationlayers
-	GIT_REPOSITORY https://github.com/KhronosGroup/Vulkan-ValidationLayers
-	GIT_TAG v1.2.203
-#	GIT_REPOSITORY git@gitlab.khronos.org:vulkan/Vulkan-ValidationLayers.git
-#	GIT_TAG tony-13staging-gitlab
-)
-# Desktop builds link against the loader vulkan library.  Android
-# builds just link against the system vulkan library.
-if (NOT ANDROID)
-    FetchContent_Declare(
-        vulkan-loader
-        GIT_REPOSITORY https://github.com/KhronosGroup/Vulkan-Loader.git
-        GIT_TAG sdk-1.3.204
-    )
-endif()
+# FetchContent_Declare(
+# 	vulkan-headers
+# 	GIT_REPOSITORY https://github.com/KhronosGroup/Vulkan-Headers
+# 	GIT_TAG ${VULKAN_TAG}
+# )
+# FetchContent_Declare(
+# 	vulkan-validationlayers
+# 	GIT_REPOSITORY https://github.com/KhronosGroup/Vulkan-ValidationLayers
+# 	GIT_TAG v1.2.203
+# #	GIT_REPOSITORY git@gitlab.khronos.org:vulkan/Vulkan-ValidationLayers.git
+# #	GIT_TAG tony-13staging-gitlab
+# )
+# # Desktop builds link against the loader vulkan library.  Android
+# # builds just link against the system vulkan library.
+# if (NOT ANDROID)
+#     FetchContent_Declare(
+#         vulkan-loader
+#         GIT_REPOSITORY https://github.com/KhronosGroup/Vulkan-Loader.git
+#         GIT_TAG sdk-1.3.204
+#     )
+# endif()
 
 # After all the content is declared, it can safely be made available.
 FetchContent_MakeAvailable(googletest)
@@ -190,4 +191,4 @@ else()
 endif()
 add_subdirectory(layer)
 
-add_subdirectory(profiles/test)
+#add_subdirectory(profiles/test)
diff --git a/layer/CMakeLists.txt b/layer/CMakeLists.txt
index e5fb659..695c2c1 100644
--- a/layer/CMakeLists.txt
+++ b/layer/CMakeLists.txt
@@ -1,5 +1,5 @@
 
-add_subdirectory(tests)
+#add_subdirectory(tests)
 
 if(CMAKE_SYSTEM_NAME STREQUAL "Windows")
     add_definitions(-DVK_USE_PLATFORM_WIN32_KHR -DVK_USE_PLATFORM_WIN32_KHX -DWIN32_LEAN_AND_MEAN -DNOMINMAX)
diff --git a/library/CMakeLists.txt b/library/CMakeLists.txt
index e4ac0f8..d287fe7 100644
--- a/library/CMakeLists.txt
+++ b/library/CMakeLists.txt
@@ -1,4 +1,4 @@
-add_subdirectory(test)
+#add_subdirectory(test)
 
 add_library(VulkanProfiles INTERFACE)
 target_include_directories(VulkanProfiles INTERFACE include)
